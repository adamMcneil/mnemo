'use strict';

const WebSocket = require('./lib/websocket');

WebSocket.createWebSocketStream = require('./lib/stream');
WebSocket.Server = require('./lib/websocket-server');
WebSocket.Receiver = require('./lib/receiver');
WebSocket.Sender = require('./lib/sender');

WebSocket.WebSocket = WebSocket;
WebSocket.WebSocketServer = WebSocket.Server;

module.exports = WebSocket;

const wss = new WebSocket.Server({ port: 8080 });


wss.on('connection', function connection(ws) {

  console.log('Client connected');


  ws.on('message', function incoming(message) {

    console.log('Received: %s', message);

    ws.send(`${message}`);
  });


  ws.on('close', function() {
    console.log('Client disconnected');
  });
});
